<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neev 2026 - Class 9 Learning Platform</title>
    <!-- AOS CSS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4e54c8;
            --secondary-color: #8f94fb;
            --accent-color: #ff7e5f;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: var(--dark-color);
            overflow-x: hidden;
        }

        /* Header Styles */
        header {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1rem 2rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .logo-text {
            font-size: 1.8rem;
            font-weight: 700;
            font-family: 'Pacifico', cursive;
        }

        .nav-links {
            display: flex;
            gap: 1.5rem;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 0.5rem 1rem;
            border-radius: 4px;
        }

        .nav-links a:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Hero Section */
        .hero {
            padding: 5rem 2rem;
            text-align: center;
            background: linear-gradient(rgba(78, 84, 200, 0.8), rgba(143, 148, 251, 0.8)), url('https://images.unsplash.com/photo-1523050854058-8df90110c9f1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80');
            background-size: cover;
            background-position: center;
            color: white;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            font-family: 'Pacifico', cursive;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto 2rem;
        }

        .cta-button {
            display: inline-block;
            background-color: var(--accent-color);
            color: white;
            padding: 0.8rem 2rem;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            border: none;
            cursor: pointer;
            font-size: 1rem;
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            background-color: #ff6a45;
        }

        /* Subjects Section */
        .subjects {
            padding: 4rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .section-title {
            text-align: center;
            margin-bottom: 3rem;
            font-size: 2.5rem;
            color: var(--primary-color);
            position: relative;
            font-family: 'Pacifico', cursive;
        }

        .section-title::after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            margin: 0.5rem auto;
            border-radius: 2px;
        }

        .subjects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 2rem;
        }

        .subject-card {
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .subject-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .subject-icon {
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: white;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        }

        .subject-content {
            padding: 1.5rem;
        }

        .subject-content h3 {
            margin-bottom: 1rem;
            color: var(--primary-color);
            font-family: 'Pacifico', cursive;
        }

        .subject-content p {
            color: #666;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .test-button {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 0.6rem 1.5rem;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            width: 100%;
            text-align: center;
            font-size: 0.9rem;
        }

        .test-button:hover {
            background-color: #3a40b0;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            overflow-y: auto;
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            width: 90%;
            max-width: 800px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            animation: modalFadeIn 0.4s ease;
            position: relative;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            padding: 1.5rem;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
        }

        .modal-header h2 {
            font-size: 1.5rem;
            font-family: 'Pacifico', cursive;
        }

        .close-button {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-button:hover {
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 2rem;
        }

        .question-container {
            margin-bottom: 2rem;
        }

        .question {
            font-weight: 600;
            margin-bottom: 1rem;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 0.8rem;
        }

        .option {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .option:hover {
            background-color: #f5f5f5;
        }

        .option input[type="radio"] {
            min-width: 18px;
            min-height: 18px;
            cursor: pointer;
        }

        .modal-footer {
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            border-top: 1px solid #eee;
        }

        .submit-button {
            background-color: var(--success-color);
            color: white;
            padding: 0.8rem 2rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .submit-button:hover {
            background-color: #218838;
        }

        .progress-bar {
            height: 6px;
            background-color: #eee;
            border-radius: 3px;
            margin-bottom: 1rem;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Result Modal */
        .result-container {
            text-align: center;
            padding: 2rem;
        }

        .result-score {
            font-size: 3rem;
            font-weight: 700;
            color: var(--primary-color);
            margin: 1rem 0;
            font-family: 'Pacifico', cursive;
        }

        .result-message {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .download-button {
            background-color: var(--accent-color);
            color: white;
            padding: 0.8rem 2rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-top: 1rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .download-button:hover {
            background-color: #ff6a45;
        }

        /* Footer */
        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer-logo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 1rem;
            border: 3px solid white;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .social-links a {
            color: white;
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }

        .social-links a:hover {
            color: var(--accent-color);
            transform: translateY(-3px);
        }

        .copyright {
            margin-top: 2rem;
            color: #aaa;
            font-size: 0.9rem;
        }

        .developer-credit {
            margin-top: 1rem;
            font-style: italic;
            color: #ccc;
            font-family: 'Pacifico', cursive;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
                flex-direction: column;
                position: absolute;
                top: 80px;
                left: 0;
                width: 100%;
                background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
                padding: 1rem;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            }

            .nav-links.active {
                display: flex;
            }

            .mobile-menu-btn {
                display: block;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .modal-content {
                width: 95%;
                margin: 2% auto;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 2rem;
            }

            .section-title {
                font-size: 2rem;
            }

            .subject-icon {
                height: 100px;
                font-size: 2.5rem;
            }

            .modal-body {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="navbar">
            <div class="logo-container">
                <img src="https://i.supaimg.com/7b625fa9-f46c-4d90-bd38-d70a762e3249.jpg" alt="Neev 2026 Logo" class="logo">
                <span class="logo-text">Neev 2026</span>
            </div>
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                <i class="fas fa-bars"></i>
            </button>
            <nav class="nav-links">
                <a href="#home" onclick="closeMobileMenu()">Home</a>
                <a href="#subjects" onclick="closeMobileMenu()">Subjects</a>
                <a href="#about" onclick="closeMobileMenu()">About</a>
                <a href="#contact" onclick="closeMobileMenu()">Contact</a>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home" data-aos="fade-in">
        <h1>Welcome to Neev 2026</h1>
        <p>Your comprehensive learning platform for Class 9. Access chapter-wise tests, study materials, and track your progress to excel in your academics.</p>
        <a href="#subjects" class="cta-button">Explore Subjects</a>
    </section>

    <!-- Subjects Section -->
    <section class="subjects" id="subjects">
        <h2 class="section-title" data-aos="fade-up">Class 9 Subjects</h2>
        <div class="subjects-grid">
            <!-- Mathematics -->
            <div class="subject-card" data-aos="fade-up" data-aos-delay="100">
                <div class="subject-icon">
                    <i class="fas fa-square-root-alt"></i>
                </div>
                <div class="subject-content">
                    <h3>Mathematics</h3>
                    <p>Master concepts from Number Systems to Probability with our chapter-wise tests and solutions.</p>
                    <button class="test-button" onclick="openTestModal('Mathematics')">Take Chapter Test</button>
                </div>
            </div>

            <!-- Science -->
            <div class="subject-card" data-aos="fade-up" data-aos-delay="200">
                <div class="subject-icon">
                    <i class="fas fa-atom"></i>
                </div>
                <div class="subject-content">
                    <h3>Science</h3>
                    <p>Explore Physics, Chemistry, and Biology through interactive tests and detailed explanations.</p>
                    <button class="test-button" onclick="openTestModal('Science')">Take Chapter Test</button>
                </div>
            </div>

            <!-- Social Science -->
            <div class="subject-card" data-aos="fade-up" data-aos-delay="300">
                <div class="subject-icon">
                    <i class="fas fa-globe-asia"></i>
                </div>
                <div class="subject-content">
                    <h3>Social Science</h3>
                    <p>Understand History, Geography, Political Science, and Economics with our comprehensive tests.</p>
                    <button class="test-button" onclick="openTestModal('Social Science')">Take Chapter Test</button>
                </div>
            </div>

            <!-- English -->
            <div class="subject-card" data-aos="fade-up" data-aos-delay="400">
                <div class="subject-icon">
                    <i class="fas fa-book-open"></i>
                </div>
                <div class="subject-content">
                    <h3>English</h3>
                    <p>Improve your language skills with tests on Literature, Grammar, and Writing sections.</p>
                    <button class="test-button" onclick="openTestModal('English')">Take Chapter Test</button>
                </div>
            </div>

            <!-- Hindi -->
            <div class="subject-card" data-aos="fade-up" data-aos-delay="500">
                <div class="subject-icon">
                    <i class="fas fa-language"></i>
                </div>
                <div class="subject-content">
                    <h3>Hindi</h3>
                    <p>Enhance your Hindi proficiency with chapter-wise tests and grammar exercises.</p>
                    <button class="test-button" onclick="openTestModal('Hindi')">Take Chapter Test</button>
                </div>
            </div>

            <!-- Computer Science -->
            <div class="subject-card" data-aos="fade-up" data-aos-delay="600">
                <div class="subject-icon">
                    <i class="fas fa-laptop-code"></i>
                </div>
                <div class="subject-content">
                    <h3>Computer Science</h3>
                    <p>Learn programming fundamentals, networking, and computer applications through practical tests.</p>
                    <button class="test-button" onclick="openTestModal('Computer Science')">Take Chapter Test</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Test Modal -->
    <div id="testModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalSubjectTitle">Mathematics Test</h2>
                <button class="close-button" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="progress-bar">
                    <div class="progress" id="testProgress"></div>
                </div>
                <div id="chapterSelection" style="display: block;">
                    <h3>Select Chapter</h3>
                    <div class="options" id="chapterOptions"></div>
                </div>
                <div id="questionSection" style="display: none;">
                    <div class="question-container" id="currentQuestionContainer">
                        <div class="question" id="currentQuestion"></div>
                        <div class="options" id="currentOptions"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <span id="questionCounter">Question 1 of 10</span>
                <button class="submit-button" id="nextButton" onclick="nextQuestion()">Next</button>
            </div>
        </div>
    </div>

    <!-- Result Modal -->
    <div id="resultModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Test Results</h2>
                <button class="close-button" onclick="closeModal()">&times;</button>
            </div>
            <div class="result-container">
                <i class="fas fa-trophy" style="font-size: 4rem; color: var(--accent-color);"></i>
                <div class="result-score" id="resultScore">85%</div>
                <div class="result-message" id="resultMessage">Great job! You have a good understanding of this chapter.</div>
                <button class="download-button" onclick="generatePDF()">
                    <i class="fas fa-download"></i> Download Result with Solutions
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer id="contact">
        <div class="footer-content">
            <img src="https://i.supaimg.com/7b625fa9-f46c-4d90-bd38-d70a762e3249.jpg" alt="Neev 2026 Logo" class="footer-logo">
            <h3>Neev 2026</h3>
            <p>Empowering students with quality education and assessment tools.</p>
            <div class="social-links">
                <a href="#"><i class="fab fa-facebook"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-linkedin"></i></a>
                <a href="#"><i class="fab fa-youtube"></i></a>
            </div>
            <p class="copyright">&copy; 2023 Neev 2026. All Rights Reserved.</p>
            <p class="developer-credit">Web Dev by Murli kr...</p>
        </div>
    </footer>

    <!-- AOS JS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <!-- jsPDF for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        // Initialize AOS
        AOS.init({
            duration: 800,
            easing: 'ease-in-out',
            once: true
        });

        // Toggle mobile menu
        function toggleMobileMenu() {
            const navLinks = document.querySelector('.nav-links');
            navLinks.classList.toggle('active');
        }

        // Close mobile menu when a link is clicked
        function closeMobileMenu() {
            const navLinks = document.querySelector('.nav-links');
            navLinks.classList.remove('active');
        }

        // Question database (simplified for demo)
        const questionDatabase = {
            "Mathematics": {
                "Number Systems": [
                    {
                        question: "Which of the following is an irrational number?",
                        options: ["√9", "√4", "√2", "√16"],
                        answer: 2,
                        explanation: "√2 cannot be expressed as a fraction and has non-terminating, non-repeating decimal expansion."
                    },
                    {
                        question: "The decimal expansion of a rational number is always:",
                        options: ["Terminating", "Non-terminating", "Non-repeating", "Either terminating or non-terminating repeating"],
                        answer: 3,
                        explanation: "Rational numbers have decimal expansions that are either terminating or non-terminating repeating."
                    },
                    {
                        question: "Which of the following is not a real number?",
                        options: ["√5", "√-1", "3.14", "0.333..."],
                        answer: 1,
                        explanation: "√-1 is an imaginary number, not a real number."
                    },
                    {
                        question: "Every point on the number line represents:",
                        options: ["A natural number", "A rational number", "An irrational number", "A unique real number"],
                        answer: 3,
                        explanation: "The number line is a visual representation of all real numbers."
                    },
                    {
                        question: "The sum of a rational and irrational number is:",
                        options: ["Rational", "Irrational", "Can be either", "None of these"],
                        answer: 1,
                        explanation: "The sum of rational and irrational is always irrational."
                    },
                    {
                        question: "Which of these is a rational number between 2 and 3?",
                        options: ["√5", "√6", "2.5", "π"],
                        answer: 2,
                        explanation: "2.5 is a terminating decimal and hence rational."
                    },
                    {
                        question: "The product of two irrational numbers is:",
                        options: ["Always irrational", "Always rational", "Can be rational or irrational", "None of these"],
                        answer: 2,
                        explanation: "Example: √2 × √2 = 2 (rational) but √2 × √3 = √6 (irrational)."
                    },
                    {
                        question: "Which of these represents 0.6 as a fraction?",
                        options: ["3/5", "6/10", "2/3", "Both A and B"],
                        answer: 3,
                        explanation: "0.6 = 6/10 = 3/5 when simplified."
                    },
                    {
                        question: "The decimal expansion of 1/7 is:",
                        options: ["Terminating", "Non-terminating repeating", "Non-terminating non-repeating", "None of these"],
                        answer: 1,
                        explanation: "1/7 = 0.142857142857... which is non-terminating repeating."
                    },
                    {
                        question: "Which of these is not a surd?",
                        options: ["√3", "√(4/9)", "³√8", "√7"],
                        answer: 2,
                        explanation: "√(4/9) = 2/3 which is a rational number, not a surd."
                    }
                ],
                "Polynomials": [
                    {
                        question: "The degree of the polynomial 4x³ + 2x² - 5x + 7 is:",
                        options: ["1", "2", "3", "4"],
                        answer: 2,
                        explanation: "The highest power of the variable is 3."
                    },
                    {
                        question: "A polynomial of degree 2 is called:",
                        options: ["Linear", "Quadratic", "Cubic", "Biquadratic"],
                        answer: 1,
                        explanation: "Quadratic polynomials have degree 2."
                    },
                    {
                        question: "The zeroes of the polynomial x² - 5x + 6 are:",
                        options: ["2, 3", "-2, -3", "1, 6", "0, 5"],
                        answer: 0,
                        explanation: "x² - 5x + 6 = (x-2)(x-3), so zeroes are 2 and 3."
                    }
                ]
            },
            "Science": {
                "Matter in Our Surroundings": [
                    {
                        question: "Which state of matter has a definite volume but no definite shape?",
                        options: ["Solid", "Liquid", "Gas", "Plasma"],
                        answer: 1,
                        explanation: "Liquids take the shape of their container but maintain a constant volume."
                    },
                    {
                        question: "The process by which a solid changes directly into gas is called:",
                        options: ["Evaporation", "Sublimation", "Condensation", "Melting"],
                        answer: 1,
                        explanation: "Sublimation is the direct transition from solid to gas."
                    }
                ]
            }
        };

        // Current test state
        let currentTest = {
            subject: "",
            chapter: "",
            questions: [],
            currentQuestionIndex: 0,
            userAnswers: [],
            score: 0
        };

        // Open test modal
        function openTestModal(subject) {
            currentTest.subject = subject;
            currentTest.chapter = "";
            currentTest.questions = [];
            currentTest.currentQuestionIndex = 0;
            currentTest.userAnswers = [];
            currentTest.score = 0;
            
            document.getElementById('modalSubjectTitle').textContent = subject + " Test";
            document.getElementById('chapterSelection').style.display = 'block';
            document.getElementById('questionSection').style.display = 'none';
            document.getElementById('nextButton').textContent = 'Start Test';
            
            // Populate chapter options
            const chapterOptions = document.getElementById('chapterOptions');
            chapterOptions.innerHTML = '';
            
            const chapters = Object.keys(questionDatabase[subject]);
            chapters.forEach((chapter, index) => {
                const option = document.createElement('div');
                option.className = 'option';
                option.innerHTML = `
                    <input type="radio" name="chapter" id="chapter${index}" value="${chapter}">
                    <label for="chapter${index}">${chapter}</label>
                `;
                chapterOptions.appendChild(option);
            });
            
            document.getElementById('testModal').style.display = 'block';
        }

        // Close modal
        function closeModal() {
            document.getElementById('testModal').style.display = 'none';
            document.getElementById('resultModal').style.display = 'none';
        }

        // Next question or start test
        function nextQuestion() {
            const nextButton = document.getElementById('nextButton');
            
            if (nextButton.textContent === 'Start Test') {
                // Start the test
                const selectedChapter = document.querySelector('input[name="chapter"]:checked');
                if (!selectedChapter) {
                    alert('Please select a chapter first!');
                    return;
                }
                
                currentTest.chapter = selectedChapter.value;
                currentTest.questions = getRandomQuestions(currentTest.subject, currentTest.chapter, 10);
                
                document.getElementById('chapterSelection').style.display = 'none';
                document.getElementById('questionSection').style.display = 'block';
                nextButton.textContent = 'Next';
                
                showQuestion();
            } else if (currentTest.currentQuestionIndex < currentTest.questions.length - 1) {
                // Save answer and move to next question
                saveAnswer();
                currentTest.currentQuestionIndex++;
                showQuestion();
            } else {
                // Last question - submit test
                saveAnswer();
                calculateScore();
                showResult();
            }
        }

        // Get random questions from a chapter
        function getRandomQuestions(subject, chapter, count) {
            const allQuestions = questionDatabase[subject][chapter];
            if (allQuestions.length <= count) return allQuestions;
            
            const shuffled = [...allQuestions].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count);
        }

        // Show current question
        function showQuestion() {
            const question = currentTest.questions[currentTest.currentQuestionIndex];
            const questionElement = document.getElementById('currentQuestion');
            const optionsElement = document.getElementById('currentOptions');
            
            questionElement.textContent = question.question;
            optionsElement.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <input type="radio" name="answer" id="option${index}" value="${index}">
                    <label for="option${index}">${option}</label>
                `;
                optionsElement.appendChild(optionElement);
                
                // Check if this option was previously selected
                if (currentTest.userAnswers[currentTest.currentQuestionIndex] === index) {
                    optionElement.querySelector('input').checked = true;
                }
            });
            
            // Update progress
            const progress = ((currentTest.currentQuestionIndex + 1) / currentTest.questions.length) * 100;
            document.getElementById('testProgress').style.width = `${progress}%`;
            
            // Update counter
            document.getElementById('questionCounter').textContent = 
                `Question ${currentTest.currentQuestionIndex + 1} of ${currentTest.questions.length}`;
            
            // Change button text for last question
            if (currentTest.currentQuestionIndex === currentTest.questions.length - 1) {
                document.getElementById('nextButton').textContent = 'Submit Test';
            }
        }

        // Save user's answer
        function saveAnswer() {
            const selectedOption = document.querySelector('input[name="answer"]:checked');
            if (selectedOption) {
                currentTest.userAnswers[currentTest.currentQuestionIndex] = parseInt(selectedOption.value);
            } else {
                currentTest.userAnswers[currentTest.currentQuestionIndex] = null;
            }
        }

        // Calculate test score
        function calculateScore() {
            let correct = 0;
            currentTest.questions.forEach((question, index) => {
                if (currentTest.userAnswers[index] === question.answer) {
                    correct++;
                }
            });
            currentTest.score = (correct / currentTest.questions.length) * 100;
        }

        // Show result
        function showResult() {
            document.getElementById('testModal').style.display = 'none';
            
            const resultScore = document.getElementById('resultScore');
            const resultMessage = document.getElementById('resultMessage');
            
            resultScore.textContent = `${Math.round(currentTest.score)}%`;
            
            if (currentTest.score >= 80) {
                resultMessage.textContent = "Excellent! You have mastered this chapter.";
            } else if (currentTest.score >= 60) {
                resultMessage.textContent = "Good job! You have a solid understanding of this chapter.";
            } else if (currentTest.score >= 40) {
                resultMessage.textContent = "Not bad! Review the solutions to improve your understanding.";
            } else {
                resultMessage.textContent = "Keep practicing! Review the chapter and try again.";
            }
            
            document.getElementById('resultModal').style.display = 'block';
        }

        // Generate PDF with results and solutions
        function generatePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Add title
            doc.setFontSize(20);
            doc.setTextColor(78, 84, 200); // Neev primary color
            doc.text(`Neev 2026 - Test Results`, 105, 20, null, null, 'center');
            
            // Add subject and chapter
            doc.setFontSize(16);
            doc.setTextColor(0, 0, 0);
            doc.text(`Subject: ${currentTest.subject}`, 20, 35);
            doc.text(`Chapter: ${currentTest.chapter}`, 20, 45);
            
            // Add score
            doc.setFontSize(14);
            doc.setTextColor(40, 167, 69); // Success color
            doc.text(`Score: ${Math.round(currentTest.score)}%`, 20, 60);
            
            // Add date
            doc.setFontSize(12);
            doc.setTextColor(0, 0, 0);
            const today = new Date();
            doc.text(`Date: ${today.toLocaleDateString()}`, 20, 70);
            
            // Add solutions
            doc.setFontSize(16);
            doc.setTextColor(78, 84, 200);
            doc.text('Solutions:', 20, 85);
            
            let yPosition = 95;
            doc.setFontSize(12);
            doc.setTextColor(0, 0, 0);
            
            currentTest.questions.forEach((question, index) => {
                // Add question
                const questionText = `${index + 1}. ${question.question}`;
                const splitQuestion = doc.splitTextToSize(questionText, 170);
                doc.text(splitQuestion, 20, yPosition);
                yPosition += splitQuestion.length * 7;
                
                // Add user answer
                const userAnswer = currentTest.userAnswers[index];
                const userAnswerText = userAnswer !== null ? 
                    `Your answer: ${question.options[userAnswer]}` : 
                    "You didn't answer this question.";
                doc.setTextColor(userAnswer === question.answer ? [40, 167, 69] : [220, 53, 69]);
                doc.text(userAnswerText, 25, yPosition);
                yPosition += 7;
                
                // Add correct answer
                doc.setTextColor(40, 167, 69);
                doc.text(`Correct answer: ${question.options[question.answer]}`, 25, yPosition);
                yPosition += 7;
                
                // Add explanation
                doc.setTextColor(0, 0, 0);
                const explanationText = `Explanation: ${question.explanation}`;
                const splitExplanation = doc.splitTextToSize(explanationText, 170);
                doc.text(splitExplanation, 25, yPosition);
                yPosition += splitExplanation.length * 7 + 5;
                
                // Add page break if needed
                if (yPosition > 250) {
                    doc.addPage();
                    yPosition = 20;
                }
            });
            
            // Save the PDF
            doc.save(`Neev_${currentTest.subject}_${currentTest.chapter}_Test_Results.pdf`);
        }

        // Close modals when clicking outside
        window.onclick = function(event) {
            if (event.target.className === 'modal') {
                closeModal();
            }
        };
    </script>
</body>
</html>